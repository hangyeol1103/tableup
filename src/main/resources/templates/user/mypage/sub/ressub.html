<!DOCTYPE html>
<html 
lang="en" 
xmlns:th="http://www.thymeleaf.org"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
xmlns:sec="http://www.thymeleaf.org/extras/spring-security" >
<head>
	<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<title>mypage_index</title>
</head>
<body>
	<main layout:fragment="content">
    
    <ul class="list-group">
      <th:block th:if="${#lists.isEmpty(reservations)}">
        <li class="list-group-item">예약 이력이 없습니다.</li>
      </th:block>

      <th:block th:each="r : ${reservations}">
        <li class="list-group-item">
          <strong>식당 번호:</strong> <span th:text="${r.res_rt_num}"></span><br>
          <strong>식당 이름:</strong> <span th:text="${r.rt_name}"></span><br>
          <strong>유저 이름:</strong> <span th:text="${r.us_name}"></span><br>

          <div class="mt-2">
            <!-- 리뷰가 있는 경우 -->
            <a th:if="${r.rev_num != 0}"
              th:href="@{/user/review/view/{rev_num}(rev_num=${r.rev_num})}"
              class="btn btn-outline-primary btn-sm">
              내 리뷰 보기
            </a>

            <!-- 리뷰가 없는 경우 -->
            <a th:if="${r.rev_num == 0}"
              th:href="@{/user/review/insert/{res_num}(res_num=${r.res_num})}"
              class="btn btn-primary btn-sm">
              리뷰 작성
            </a>
          </div>
          
        </li>
      </th:block>
    </ul>



	</main>
</body>
</html>
